# 大会検索・チーム検索 Webアプリ

Google Apps Scriptを使用した大会・チーム検索Webアプリケーションです。

## 機能

1. **大会検索**: 指定した期間に開催される大会を一覧表示
2. **チーム検索**: 指定した地域から呼べるチームを地方ごとにグループ化して表示

## セットアップ方法

### 1. Google Apps Scriptプロジェクトを作成

1. 対象のスプレッドシートを開く
2. メニューから **拡張機能** → **Apps Script** をクリック
3. 新しいApps Scriptエディタが開きます

### 2. コードをコピー

#### Code.gs
1. 左のファイル一覧で `コード.gs` (または `Code.gs`) をクリック
2. 既存の内容をすべて削除
3. `Code.gs` ファイルの内容をすべてコピー＆ペースト

#### index.html
1. 左のファイル一覧の「+」ボタンをクリック → **HTML** を選択
2. ファイル名を `index` と入力（.htmlは自動で追加されます）
3. `index.html` ファイルの内容をすべてコピー＆ペースト

### 3. Webアプリとしてデプロイ

1. 右上の **デプロイ** ボタンをクリック
2. **新しいデプロイ** を選択
3. 歯車アイコンの横の **種類を選択** で **ウェブアプリ** を選択
4. 以下の設定を行う：
   - **説明**: 任意（例：大会検索アプリ v1.0）
   - **次のユーザーとして実行**: 自分
   - **アクセスできるユーザー**: 「全員」または必要に応じて設定
5. **デプロイ** をクリック
6. 初回は承認が必要です。**アクセスを承認** をクリックし、Googleアカウントでログイン
7. 表示されるURLがWebアプリのURLです

## 必要なシート構造

スプレッドシートには以下のシートが必要です：

### 大会_季節カレンダー
| A列 | B列 | C列 | D列 | E列 | F列 | G列 |
|-----|-----|-----|-----|-----|-----|-----|
| 大会_季節 | カテゴリ | 大会名 | 範囲(都道府県) | 範囲名(地方) | 開始月 | 終了月 |

- F列・G列は日付形式（例：2026/01/01）

### チームDB
| A列 | B列 | C列 | D列 |
|-----|-----|-----|-----|
| チーム名 | カテゴリー | 都道府県 | 地方 |

- B列は複数カテゴリー可（スペースまたはカンマ区切り）

### 都道府県_地方マスター
| A列 | B列 |
|-----|-----|
| 都道府県 | 地方 |

### 呼べる地方ルール
| A列 | B列 |
|-----|-----|
| 基準地方 | 呼べる地方 |

## 使い方

1. WebアプリのURLにアクセス
2. 検索条件を入力：
   - **開始日**: イベントの開始日
   - **終了日**: イベントの終了日
   - **都道府県**: 開催地の都道府県
   - **カテゴリ**: U-12、U-15など（省略可）
3. **検索する** ボタンをクリック
4. 結果が表示されます：
   - **該当する大会**: 期間が重複している大会の一覧
   - **呼べるチーム候補**: 選択した都道府県の地方から呼べるチームの一覧

## トラブルシューティング

### 「承認が必要です」と表示される
- 初回実行時はGoogleアカウントの承認が必要です
- 「権限を確認」→「許可」をクリックしてください

### データが表示されない
- シート名が正確に一致しているか確認してください
- 1行目はヘッダー行として扱われます

### 検索結果が正しくない
- 日付が正しい形式（YYYY/MM/DD）で入力されているか確認
- カテゴリ名の表記ゆれ（U-15、U15、u15など）は自動的に正規化されます

## 更新方法

コードを更新した場合：

1. Apps Scriptエディタでコードを編集
2. **デプロイ** → **デプロイを管理** をクリック
3. 既存のデプロイの **編集（鉛筆アイコン）** をクリック
4. **バージョン** を「新しいバージョン」に変更
5. **デプロイ** をクリック

## ライセンス

このプロジェクトは自由に使用・改変できます。

